<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="运算定义变量使用DECLARE来声明，DEFAULT赋默认值，SET赋值12DECLARE counter INT DEFAULT 0;   SET counter = counter+1;">
<meta name="keywords" content="MySql">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql之存储过程,函数,触发器,视图">
<meta property="og:url" content="http://peterguo3019.github.io/2018/03/05/MySql之存储过程,函数,触发器,视图/index.html">
<meta property="og:site_name" content="从前有只小叽叽">
<meta property="og:description" content="运算定义变量使用DECLARE来声明，DEFAULT赋默认值，SET赋值12DECLARE counter INT DEFAULT 0;   SET counter = counter+1;">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-06-01T09:01:57.969Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mysql之存储过程,函数,触发器,视图">
<meta name="twitter:description" content="运算定义变量使用DECLARE来声明，DEFAULT赋默认值，SET赋值12DECLARE counter INT DEFAULT 0;   SET counter = counter+1;">






  <link rel="canonical" href="http://peterguo3019.github.io/2018/03/05/MySql之存储过程,函数,触发器,视图/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Mysql之存储过程,函数,触发器,视图 | 从前有只小叽叽</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">从前有只小叽叽</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Peter's Blog</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://peterguo3019.github.io/2018/03/05/MySql之存储过程,函数,触发器,视图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Peter">
      <meta itemprop="description" content="心存敬畏">
      <meta itemprop="image" content="/images/head.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="从前有只小叽叽">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Mysql之存储过程,函数,触发器,视图
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-03-05 11:09:02" itemprop="dateCreated datePublished" datetime="2018-03-05T11:09:02+08:00">2018-03-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-06-01 17:01:57" itemprop="dateModified" datetime="2018-06-01T17:01:57+08:00">2018-06-01</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h2><h3 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h3><p>使用DECLARE来声明，DEFAULT赋默认值，SET赋值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DECLARE counter INT DEFAULT 0;   </span><br><span class="line">SET counter = counter+1;</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<h3 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h3><h4 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h4><p>IF THEN、ELSEIF、ELSE、END IF<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DECLARE type int;</span><br><span class="line">DECLARE c varchar(50);</span><br><span class="line">SET type=10;</span><br><span class="line">IF type = 0 THEN </span><br><span class="line">    set c = &apos;param is 0&apos;;</span><br><span class="line">ELSEIF type = 1 THEN </span><br><span class="line">    set c = &apos;param is 1&apos;;</span><br><span class="line">ELSE</span><br><span class="line">    set c = &apos;param is others, not 0 or 1&apos;;</span><br><span class="line">END IF;</span><br></pre></td></tr></table></figure></p>
<h4 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h4><p>WHILE DO、END WHILE<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DECLARE n int DEFAULT 10;</span><br><span class="line">DECLARE s int DEFAULT 0;</span><br><span class="line">WHILE i &lt;= n DO</span><br><span class="line">    set s = s + i;</span><br><span class="line">END WHILE;</span><br></pre></td></tr></table></figure></p>
<p>LOOP、END LOOP<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DECLARE n int DEFAULT 0;</span><br><span class="line">DECLARE s int DEFAULT 0;</span><br><span class="line">my_loop:loop</span><br><span class="line">    SET s=s+1;</span><br><span class="line">    SET n=n+1;</span><br><span class="line">    if s=10 THEN </span><br><span class="line">        leave my_loop;</span><br><span class="line">    end if; </span><br><span class="line">end loop my_loop;</span><br></pre></td></tr></table></figure></p>
<p>REPEAT、UNTIL<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DECLARE n int DEFAULT 0;</span><br><span class="line">REPEAT</span><br><span class="line">    set n=n+1;</span><br><span class="line">UNTIL n=10 END REPEAT;</span><br></pre></td></tr></table></figure></p>
<p>CASE语句<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DECLARE c varchar(500);</span><br><span class="line">DECLARE type int DEFAULT 0;</span><br><span class="line">CASE type</span><br><span class="line">WHEN 0 THEN</span><br><span class="line">    set c = &apos;param is 0&apos;;</span><br><span class="line">WHEN 1 THEN</span><br><span class="line">    set c = &apos;param is 1&apos;;</span><br><span class="line">ELSE</span><br><span class="line">    set c = &apos;param is others, not 0 or 1&apos;;</span><br><span class="line">END CASE;</span><br></pre></td></tr></table></figure></p>
<h2 id="存储过程-函数"><a href="#存储过程-函数" class="headerlink" title="存储过程/函数"></a>存储过程/函数</h2><p><a href="https://dev.mysql.com/doc/refman/5.6/en/create-procedure.html" title="官方文档" target="_blank" rel="noopener">官网文档</a></p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>简单的说，就是一组SQL语句集，功能强大，可以实现一些比较复杂的逻辑功能，类似于JAVA语言中的方法；<br>存储过程跟触发器有点类似，都是一组SQL集，但是存储过程是主动调用的，且功能比触发器更加强大，触发器是某件事触发后自动调用；</p>
<h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ol>
<li>有输入输出参数，可以声明变量，有if/else,case,while等控制语句，通过编写存储过程，可以实现复杂的逻辑功能；</li>
<li>函数的普遍特性：模块化，封装，代码复用；</li>
<li>速度快，只有首次执行需经过编译和优化步骤，后续被调用可以直接执行，省去以上步骤；</li>
</ol>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a><a name="1">语法</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">CREATE</span><br><span class="line">    [DEFINER = &#123; user | CURRENT_USER &#125;]</span><br><span class="line">    PROCEDURE sp_name ([proc_parameter[,...]])</span><br><span class="line">    [characteristic ...] routine_body</span><br><span class="line"></span><br><span class="line">CREATE</span><br><span class="line">    [DEFINER = &#123; user | CURRENT_USER &#125;]</span><br><span class="line">    FUNCTION sp_name ([func_parameter[,...]])</span><br><span class="line">    RETURNS type</span><br><span class="line">    [characteristic ...] routine_body</span><br><span class="line"></span><br><span class="line">proc_parameter:</span><br><span class="line">    [ IN | OUT | INOUT ] param_name type</span><br><span class="line"></span><br><span class="line">func_parameter:</span><br><span class="line">    param_name type</span><br><span class="line"></span><br><span class="line">type:</span><br><span class="line">    Any valid MySQL data type</span><br><span class="line"></span><br><span class="line">characteristic:</span><br><span class="line">    COMMENT &apos;string&apos;</span><br><span class="line">  | LANGUAGE SQL</span><br><span class="line">  | [NOT] DETERMINISTIC</span><br><span class="line">  | &#123; CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA &#125;</span><br><span class="line">  | SQL SECURITY &#123; DEFINER | INVOKER &#125;</span><br><span class="line"></span><br><span class="line">routine_body:</span><br><span class="line">    Valid SQL routine statement</span><br></pre></td></tr></table></figure>
<h4 id="创建存储过程"><a href="#创建存储过程" class="headerlink" title="创建存储过程"></a>创建存储过程</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># ################# 不带返回值 #################</span><br><span class="line"># 删除已有的存储过程</span><br><span class="line">DROP PROCEDURE IF EXISTS `pr_add`;</span><br><span class="line">DELIMITER ;;</span><br><span class="line"># 创建存储过程</span><br><span class="line">CREATE DEFINER=`root`@`localhost` PROCEDURE `pr_add`(a int,b int)</span><br><span class="line">BEGIN</span><br><span class="line">    #定义变量c</span><br><span class="line">   declare c int;</span><br><span class="line">   if a is null then set a = 0;</span><br><span class="line">   end if;</span><br><span class="line">   if b is null then set b = 0;</span><br><span class="line">   end if;</span><br><span class="line">   set c = a + b;</span><br><span class="line">   select c as sum;</span><br><span class="line">END</span><br><span class="line">;;</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"># ################# 不带返回值 #################</span><br><span class="line"># 删除已有的存储过程</span><br><span class="line">DROP PROCEDURE IF EXISTS `pr_add`;</span><br><span class="line">DELIMITER ;;</span><br><span class="line"># 创建存储过程</span><br><span class="line">CREATE DEFINER=`root`@`localhost` PROCEDURE `pr_add`(IN a int,IN b int,OUT sum int)</span><br><span class="line">BEGIN</span><br><span class="line">    #定义变量c</span><br><span class="line">   declare c int;</span><br><span class="line">   if a is null then set a = 0;</span><br><span class="line">   end if;</span><br><span class="line">   if b is null then set b = 0;</span><br><span class="line">   end if;</span><br><span class="line">   # 输出值</span><br><span class="line">   set sum = a + b;</span><br><span class="line">END</span><br><span class="line">;;</span><br><span class="line">DELIMITER ;</span><br><span class="line"># 调用</span><br><span class="line">mysql&gt; set @a=1;</span><br><span class="line">mysql&gt; call pr_add(1,@a,@s);</span><br><span class="line">mysql&gt; select @s as sum;</span><br></pre></td></tr></table></figure>
<p>在终端创建存储过程：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">如果您使用mysql客户端程序来定义包含分号字符的存储程序，则会出现问题。 默认情况下， mysql本身将分号识别为语句分隔符，因此必须临时重新定义分隔符，才能将整个存储的程序定义传递到服务器。使用delimiter命令，重新定义mysql分隔符。 分隔符可以由单个字符或多个字符组成</span><br><span class="line">*/</span><br><span class="line">//在客户端中查看所有用户，使用</span><br><span class="line">mysql&gt; delimiter $$</span><br><span class="line">mysql&gt; CREATE DEFINER = &apos;admin&apos;@&apos;localhost&apos; PROCEDURE account_count()</span><br><span class="line">-&gt; SQL SECURITY INVOKER</span><br><span class="line">-&gt; BEGIN</span><br><span class="line">-&gt; SELECT &apos;Number of accounts:&apos;, COUNT(*) FROM mysql.user;</span><br><span class="line">-&gt; END $$</span><br><span class="line">mysql&gt; delimiter ;</span><br></pre></td></tr></table></figure></p>
<h4 id="创建存储函数"><a href="#创建存储函数" class="headerlink" title="创建存储函数"></a>创建存储函数</h4><p>先查看函数功能是否开启：show variables like ‘%func%’，未开启则创建函数会报错。</p>
<p>解决办法有两种， </p>
<blockquote>
<p>第一种是在创建子程序(存储过程、函数、触发器)时，声明为 DETERMINISTIC | NO SQL | READS SQL DATA 等中的一个，具体可以看<a href="#1">语法</a>;<br>第二种是信任子程序的创建者，禁止创建、修改子程序时对SUPER权限的要求，设置log_bin_trust_routine_creators全局系统变量为1。<br>设置方法有三种:<br>1.在客户端上执行SET GLOBAL log_bin_trust_function_creators = 1 开启,关闭则为0;<br>2.MySQL启动时，加上–log-bin-trust-function-creators选项，参数设置为1<br>3.在MySQL配置文件my.ini或my.cnf中的[mysqld]段上加log-bin-trust-function-creators=1</p>
</blockquote>
<p>eg:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">DROP FUNCTION IF EXISTS `f1`;</span><br><span class="line">DELIMITER ;;</span><br><span class="line"># 创建存储函数</span><br><span class="line"># return 数据类型时，声明返回类型是returns, return sql语句是，声明返回类型是return;</span><br><span class="line">CREATE DEFINER=`root`@`localhost` FUNCTION `f1`(a int,b int) RETURNS int(11) DETERMINISTIC</span><br><span class="line">BEGIN</span><br><span class="line">    #定义变量c</span><br><span class="line">   declare c int;</span><br><span class="line">   if a is null then set a = 0;</span><br><span class="line">   end if;</span><br><span class="line">   if b is null then set b = 0;</span><br><span class="line">   end if;</span><br><span class="line">   return a + b;</span><br><span class="line">END</span><br><span class="line">;;</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure></p>
<p>存储的函数不能递归,默认情况下允许递归存储过程，但禁用。</p>
<blockquote>
<p>要启用递归，请将max_sp_recursion_depth服务器系统变量设置为大于零的值。<br>    存储过程递归增加了对线程堆栈空间的需求。<br>    如果增加max_sp_recursion_depth的值，可能需要通过在服务器启动时增加thread_stack的值来增加线程堆栈大小</p>
</blockquote>
<p>存储过程或函数与特定数据库相关联。 这有几个含义：</p>
<blockquote>
<p>1.当调用例程时，执行隐式USE db_name （当程序终止时，它将被撤销）。 存储例程中的USE语句不允许。<br>    2.可以使用数据库名称限定常规名称。这可以用于引用不在当前数据库中的例程。例如，要调用与test数据库相关联的存储过程p或函数f ，可以说CALL test.p()或test.f() 。<br>    3.当数据库被删除时，与它相关联的所有存储例程也被删除。</p>
</blockquote>
<h4 id="查看存储过程和函数-存储函数-触发器"><a href="#查看存储过程和函数-存储函数-触发器" class="headerlink" title="查看存储过程和函数|存储函数|触发器"></a><a name="2">查看存储过程和函数|存储函数|触发器</a></h4><p>1）查询数据库中的存储过程/函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 方法一：</span><br><span class="line">select `name` from mysql.proc where db = &apos;your_db_name&apos; and `type` = &apos;PROCEDURE|FUNCTION|TRIGGER&apos;;</span><br><span class="line"># 方法二：</span><br><span class="line">SHOW &#123;PROCEDURE | FUNCTION&#125; status</span><br></pre></td></tr></table></figure></p>
<p>2）查看存储过程|函数|触发器的创建代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//查看存储过程</span><br><span class="line">SHOW CREATE &#123;PROCEDURE | FUNCTION | TRIGGER&#125; sp_name;</span><br></pre></td></tr></table></figure></p>
<h4 id="删除存储过程-函数-触发器"><a href="#删除存储过程-函数-触发器" class="headerlink" title="删除存储过程|函数|触发器"></a>删除存储过程|函数|触发器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP &#123;PROCEDURE | FUNCTION | TRIGGER &#125; [IF EXISTS] sp_name;</span><br></pre></td></tr></table></figure>
<h3 id="存储过程和存储函数优缺点和区别"><a href="#存储过程和存储函数优缺点和区别" class="headerlink" title="存储过程和存储函数优缺点和区别"></a>存储过程和存储函数优缺点和区别</h3><p>优缺点：</p>
<table>
<thead>
<tr>
<th style="text-align:left">优点</th>
<th style="text-align:left">缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">执行速度更快—因为存储过程是预编译过的<br>模块化程序设计—类似方法的复用<br> 提高系统的安全性—防止SQL注入<br>减少网络流量—只需传输存储过程的名称即可</td>
<td style="text-align:left">存储过程和函数的编写比单句SQL语句复杂<br>在编写存储过程和函数时，需要创建这些数据库对象的权限</td>
</tr>
</tbody>
</table>
<p>区别：</p>
<table>
<thead>
<tr>
<th style="text-align:left">存储过程</th>
<th style="text-align:left">存储函数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">是用户定义的一系列sql语句的集合，涉及特定表或其它对象的任务，用户可以调用存储过程</td>
<td style="text-align:left">通常是数据库已定义的方法，它接收参数并返回某种类型的值并且不涉及特定用户表</td>
</tr>
<tr>
<td style="text-align:left">存储过程实现的功能要复杂一点</td>
<td style="text-align:left">函数的实现的功能针对性比较强</td>
</tr>
<tr>
<td style="text-align:left">存储过程，功能强大，可以执行包括修改表等一系列数据库操</td>
<td style="text-align:left">用户定义函数不能用于执行一组修改全局数据库状态的操作</td>
</tr>
<tr>
<td style="text-align:left">可以返回参数，如记录集且可以返回多个</td>
<td style="text-align:left">函数只能返回值或者表对象且只能返回一个变量</td>
</tr>
<tr>
<td style="text-align:left">参数可以有IN,OUT,INOUT三种类型</td>
<td style="text-align:left">参数只能有IN类</td>
</tr>
<tr>
<td style="text-align:left">声明时不需要返回类型</td>
<td style="text-align:left">声明时需要描述返回类型，且函数体中必须包含一个有效的RETURN语句</td>
</tr>
<tr>
<td style="text-align:left">可以使用非确定函数</td>
<td style="text-align:left">不允许在用户定义函数主体中内置非确定函数</td>
</tr>
<tr>
<td style="text-align:left">一般是作为一个独立的部分来执行（CALL语句执行）</td>
<td style="text-align:left">可以作为查询语句的一个部分来调用（SELECT调用），由于函数可以返回一个表对象，因此它可以在查询语句中位于FROM关键字的后面</td>
</tr>
<tr>
<td style="text-align:left">SQL语句中不可用存储过程</td>
<td style="text-align:left">SQL语句可以使用函数</td>
</tr>
</tbody>
</table>
<h2 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h2><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><pre><code>触发事件的操作和触发器里的SQL语句是一个事务操作，具有原子性,要么全部执行，要么都不执行；
</code></pre><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><pre><code>保证数据的完整性，起到约束的作用；
</code></pre><h3 id="弊端"><a href="#弊端" class="headerlink" title="弊端"></a>弊端</h3><pre><code>增加程序的复杂度，有些业务逻辑在代码中处理，有些业务逻辑用触发器处理，会使后期维护变得困难；
</code></pre><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE</span><br><span class="line">    [DEFINER = &#123; user | CURRENT_USER &#125;]</span><br><span class="line">    TRIGGER trigger_name</span><br><span class="line">    trigger_time trigger_event</span><br><span class="line">    ON tbl_name FOR EACH ROW</span><br><span class="line">    trigger_body</span><br><span class="line"></span><br><span class="line">trigger_time: &#123; BEFORE | AFTER &#125;</span><br><span class="line"></span><br><span class="line">trigger_event: &#123; INSERT | UPDATE | DELETE &#125;</span><br></pre></td></tr></table></figure>
<h4 id="创建触发器"><a href="#创建触发器" class="headerlink" title="创建触发器"></a>创建触发器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DROP TRIGGER IF EXISTS `t1`;</span><br><span class="line">DELIMITER ;;</span><br><span class="line">CREATE TRIGGER `t1` AFTER UPDATE ON `user` FOR EACH ROW begin</span><br><span class="line">    # 用户更新历史记录</span><br><span class="line">    INSERT INTO user_history(user_id,operatetype, operatetime) VALUES (new.id, &apos;update a user&apos;, now());</span><br><span class="line">end</span><br><span class="line">;;</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<h4 id="删除查看"><a href="#删除查看" class="headerlink" title="删除查看"></a><a href="#2">删除查看</a></h4><h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><p><a href="http://blog.sina.com.cn/s/blog_8edc37a80101c4ba.html" target="_blank" rel="noopener">视图总结原地址</a></p>
<h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><blockquote>
<p>视图是从一个或多个表（或视图）导出的表。视图是数据库的用户使用数据库的观点。可以根据他们的不同需求，在物理的数据库上定义他们对数据库所要求的数据结构，这种根据用户观点所定义的数据结构就是视图。</p>
</blockquote>
<h3 id="与表区别"><a href="#与表区别" class="headerlink" title="与表区别"></a>与表区别</h3><blockquote>
<p>视图与表（有时为与视图区别，也称表为基本表——Base Table）不同，视图是一个虚表，即视图所对应的数据不进行实际存储，数据库中只存储视图的定义，对视图的数据进行操作时，系统根据视图的定义去操作与视图相关联的基本表。</p>
</blockquote>
<h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><blockquote>
<p>1）为用户集中数据，简化用户的数据查询和处理。有时用户所需要的数据分散在多个表中，定义视图可将它们集中在一起，从而方便用户的数据查询和处理。<br>2）屏蔽数据库的复杂性。用户不必了解复杂的数据库中的表结构，并且数据库表的更改也不影响用户对数据库的使用。<br>3）简化用户权限的管理。只需授予用户使用视图的权限，而不必指定用户只能使用表的特定列，也增加了安全性。<br>4）便于数据共享。各用户不必都定义和存储自己所需的数据，可共享数据库的数据，这样同样的数据只需存储一次。<br>5）可以重新组织数据以便输出到其他应用程序中</p>
</blockquote>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><blockquote>
<p>1）在默认情况下，将在当前数据库创建新视图。要想在给定数据库中明确创建视图，创建时，应将名称指定为db_name.view_name<br>2）视图的命名必须遵循标志符命名规则，不能与表同名，且对每个用户视图名必须是唯一的，即对不同用户，即使是定义相同的视图，也必须使用不同的名字。<br>3）不能把规则、默认值或触发器与视图相关联。<br>4）不能在视图上建立任何索引，包括全文索引。</p>
</blockquote>
<h3 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span></span><br><span class="line">    [<span class="keyword">OR</span> <span class="keyword">REPLACE</span>]</span><br><span class="line">    [ALGORITHM = &#123;UNDEFINED | <span class="keyword">MERGE</span> | TEMPTABLE&#125;]</span><br><span class="line">    [DEFINER = &#123; <span class="keyword">user</span> | <span class="keyword">CURRENT_USER</span> &#125;]</span><br><span class="line">    [<span class="keyword">SQL</span> <span class="keyword">SECURITY</span> &#123; DEFINER | INVOKER &#125;]</span><br><span class="line">    <span class="keyword">VIEW</span> view_name [(column_list)]</span><br><span class="line">    <span class="keyword">AS</span> select_statement</span><br><span class="line">    [<span class="keyword">WITH</span> [<span class="keyword">CASCADED</span> | <span class="keyword">LOCAL</span>] <span class="keyword">CHECK</span> <span class="keyword">OPTION</span>]</span><br><span class="line">    </span><br><span class="line">     </span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"># column_list：</span></span><br><span class="line"><span class="comment">要想为视图的列定义明确的名称，可使用可选的column_list子句，列出由逗号隔开的列名。column_list中的 名称数目必须等于SELECT语句检索的列数。若使用与源表或视图中相同的列名时可以省略column_list。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># or replace：</span></span><br><span class="line"><span class="comment">给定了OR REPLACE子句，语句能够替换已有的同名视图。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># algorithm子句：</span></span><br><span class="line"><span class="comment"> 可选的ALGORITHM子句是对标准SQL的MySQL扩展，规定了MySQL的算法，算法会影响MySQL处理视图的方 式。ALGORITHM可取3个值：MERGE、TEMPTABLE或UNDEFINED。如果没有ALGORITHM子句，默认算法是 UNDEFINED（未定义的）。指定了MERGE选项，会将引用视图的语句的文本与视图定义合并起来，使得视图定义的某一部分取代语句的对应部分。 MERGE算法要求视图中的行和基表中的行具有一对一的关系，如果不具有该关系，必须使用临时表取而代之。指定了TEMPTABLE选项，视图的结果将被 置于临时表中，然后使用它执行语句。</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> # select_statement：</span></span><br><span class="line"><span class="comment">用来创建视图的SELECT语句，可在SELECT语句中查询多个表或视图。但对SELECT语句有以下的限制：</span></span><br><span class="line"><span class="comment">1）定义视图的用户必须对所参照的表或视图有查询（即可执行SELECT语句）权限；</span></span><br><span class="line"><span class="comment">2）不能包含FROM子句中的子查询；</span></span><br><span class="line"><span class="comment">3）不能引用系统或用户变量；</span></span><br><span class="line"><span class="comment">4）不能引用预处理语句参数；</span></span><br><span class="line"><span class="comment">5）在定义中引用的表或视图必须存在；</span></span><br><span class="line"><span class="comment">6）若引用不是当前数据库的表或视图时，要在表或视图前加上数据库的名称；</span></span><br><span class="line"><span class="comment">7）在视图定义中允许使用ORDER BY，但是，如果从特定视图进行了选择，而该视图使用了具有自己ORDER BY的语句，则视图定义中的ORDER BY将被忽略。</span></span><br><span class="line"><span class="comment">8）对于SELECT语句中的其他选项或子句，若视图中也包含了这些选项，则效果未定义。例如，如果在视图定义中包含LIMIT子句，而SELECT语句使用了自己的LIMIT子句，MySQL对使用哪个LIMIT未做定义。</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"># WITH CHECK OPTION：</span></span><br><span class="line"><span class="comment">指出在可更新视图上所进行的修改都要符合select_statement所指定的限制条件，这样可以确保数据修改后，仍可通过视图看到修 改的数据。当视图是根据另一个视图定义的时，WITH CHECK OPTION给出两个参数：LOCAL和CASCADED。它们决定了检查测试的范围。Local关键字使CHECK OPTION只对定义的视图进行检查，cascaded则会对所有视图进行检查。如果未给定任一关键字，默认值为CASCADED。</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h4 id="可更新视图"><a href="#可更新视图" class="headerlink" title="可更新视图"></a>可更新视图</h4><p>要通过视图更新基本表数据，必须保证视图是可更新视图，即可以在INSET、UPDATE或DELETE等语句当中使用它们。对于可更新的视图，在视图中的行和基表中的行之间必须具有一对一的关系。还有一些特定的其他结构，这类结构会使得视图不可更新。</p>
<p>如果视图包含下述结构中的任何一种，那么它就是不可更新的：</p>
<blockquote>
<p>1）聚合函数；<br>2）DISTINCT关键字；<br>3）GROUP BY子句；<br>4）ORDER BY子句；<br>5）HAVING子句；<br>6）UNION运算符；<br>7）位于选择列表中的子查询；<br>8）FROM子句中包含多个表；<br>9）SELECT语句中引用了不可更新视图；<br>10）WHERE子句中的子查询，引用FROM子句中的表；<br>11）ALGORITHM 选项指定为TEMPTABLE（使用临时表总会使视图成为不可更新的）。</p>
</blockquote>
<h4 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h4><p>使用INSERT语句通过视图向基本表插入数据<br>例: 创建视图CS_XS，视图中包含计算机专业的学生信息，并向CS_XS视图中插入一条记录：（’081255’，’李牧’，’计算机’，1，’1990-10-21’，50，NULL，NULL）。<br>首先创建视图CS_XS：(以下的删除、修改都是用该表)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATEOR REPLACE VIEW CS_XS</span><br><span class="line">      AS  SELECT* FROM XS</span><br><span class="line">      WHERE 专业 = &apos;计算机&apos;  WITH CHECK OPTION;</span><br></pre></td></tr></table></figure></p>
<p><strong>注意:<br>在创建视图的时候加上WITH CHECK OPTION子句，是因为WITH CHECK OPTION子句会在更新数据的时候检查新数据是否符合视图定义中WHERE子句的条件。WITH CHECKOPTION子句只能和可更新视图一起使用。</strong></p>
<p>接下来插入记录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO CS_XS</span><br><span class="line">    VALUES(&apos;081255&apos;, &apos;李牧&apos;, &apos;计算机&apos;, 1, &apos;1990-10-14&apos;,50, NULL, NULL);</span><br></pre></td></tr></table></figure></p>
<p>注意：这里插入记录时专业名只能为“计算机”。<br>这时，使用SELECT语句查询CS_XS视图和基本表XS，就可发现XS表中该记录已经被添加。</p>
<p><strong>当视图所依赖的基本表有多个时，不能向该视图插入数据，因为这将会影响多个基本表。</strong>例如，不能向视图CS_KC插入数据，因为CS_KC依赖两个基本表：XS和XS_KC。<br><strong>对INSERT语句还有一个限制：SELECT语句中必须包含FROM子句中指定表的所有不能为空的列。</strong>例如，若CS_XS视图定义的时候不加上“姓名”字段，则插入数据的时候会出错。</p>
<h4 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h4><p>使用UPDATE语句可以通过视图修改基本表的数据<br>例: 将CS_XS视图中所有学生的总学分增加8。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE CS_XS SET 总学分 = 总学分+8;</span><br></pre></td></tr></table></figure></p>
<p>该语句实际上是将CS_XS视图所依赖的基本表XS中所有记录的总学分字段值在原来基础上增加8。<br><strong>若一个视图依赖于多个基本表，则一次修改该视图只能变动一个基本表的数据。</strong></p>
<p>例: 将CS_KC视图中学号为081101的学生的101课程成绩改为90。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UPDATE CS_KC SET 成绩=90</span><br><span class="line">    WHERE 学号=&apos;081101&apos; AND 课程号=&apos;101&apos;;</span><br></pre></td></tr></table></figure></p>
<p>本例中，视图CS_KC依赖于两个基本表：XS和XS_KC，对CS_KC视图的一次修改只能改变学号（源于XS表）或者课程号和成绩（源于XS_KC表）。</p>
<h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><p>使用DELETE语句可以通过视图删除基本表的数据</p>
<p>例: 删除CS_XS中女同学的记录。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETEFROM CS_XS  WHERE 性别 = 0;</span><br></pre></td></tr></table></figure></p>
<p><strong>注意：对依赖于多个基本表的视图，不能使用DELETE语句。</strong>例如，不能通过对CS_KC视图执行DELETE语句而删除与之相关的基本表XS及XS_KC表的数据。</p>
<h4 id="修改已有视图的定义"><a href="#修改已有视图的定义" class="headerlink" title="修改已有视图的定义"></a>修改已有视图的定义</h4><p>语法格式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER[ALGORITHM = &#123;UNDEFINED | MERGE | TEMPTABLE&#125;]</span><br><span class="line">    VIEW view_name [(column_list)]  AS select_statement</span><br><span class="line">    [WITH [CASCADED | LOCAL] CHECK OPTION]</span><br></pre></td></tr></table></figure></p>
<p>ALTERVIEW语句的语法和CREATE VIEW类似</p>
<p>例: 将CS_XS视图修改为只包含计算机专业学生的学号、姓名和总学分。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">USEXSCJ;</span><br><span class="line">ALTERVIEW CS_XS</span><br><span class="line">AS  SELECT 学号,姓名,总学分  FROM XS</span><br><span class="line">      WHERE 专业名 = &apos;计算机&apos;;</span><br></pre></td></tr></table></figure></p>
<h4 id="查看视图"><a href="#查看视图" class="headerlink" title="查看视图"></a>查看视图</h4><p>查看视图数据<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from view_name;</span><br></pre></td></tr></table></figure></p>
<p>查看视图状态<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span> <span class="keyword">status</span> <span class="keyword">like</span> view_name;</span><br><span class="line">``` </span><br><span class="line">#### 删除视图</span><br><span class="line">```sql</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">VIEW</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] view_name1 [,view_name2]...</span><br><span class="line">    [RESTRICT | <span class="keyword">CASCADE</span>]</span><br></pre></td></tr></table></figure></p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/MySql/" rel="tag"># MySql</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/03/MySql操作之表篇/" rel="next" title="Mysql操作之表篇">
                <i class="fa fa-chevron-left"></i> Mysql操作之表篇
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/24/Quartz与Spring整合/" rel="prev" title="quartz与spring整合">
                quartz与spring整合 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/head.jpeg"
                alt="Peter" />
            
              <p class="site-author-name" itemprop="name">Peter</p>
              <p class="site-description motion-element" itemprop="description">心存敬畏</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/peterguo3019" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#运算"><span class="nav-number">1.</span> <span class="nav-text">运算</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义变量"><span class="nav-number">1.1.</span> <span class="nav-text">定义变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#控制语句"><span class="nav-number">1.2.</span> <span class="nav-text">控制语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#条件语句"><span class="nav-number">1.2.1.</span> <span class="nav-text">条件语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#循环语句"><span class="nav-number">1.2.2.</span> <span class="nav-text">循环语句</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#存储过程-函数"><span class="nav-number">2.</span> <span class="nav-text">存储过程/函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义"><span class="nav-number">2.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特性"><span class="nav-number">2.2.</span> <span class="nav-text">特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#语法"><span class="nav-number">2.3.</span> <span class="nav-text">语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建存储过程"><span class="nav-number">2.3.1.</span> <span class="nav-text">创建存储过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建存储函数"><span class="nav-number">2.3.2.</span> <span class="nav-text">创建存储函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看存储过程和函数-存储函数-触发器"><span class="nav-number">2.3.3.</span> <span class="nav-text">查看存储过程和函数|存储函数|触发器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除存储过程-函数-触发器"><span class="nav-number">2.3.4.</span> <span class="nav-text">删除存储过程|函数|触发器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存储过程和存储函数优缺点和区别"><span class="nav-number">2.4.</span> <span class="nav-text">存储过程和存储函数优缺点和区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#触发器"><span class="nav-number">3.</span> <span class="nav-text">触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特点"><span class="nav-number">3.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#作用"><span class="nav-number">3.2.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#弊端"><span class="nav-number">3.3.</span> <span class="nav-text">弊端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#语法-1"><span class="nav-number">3.4.</span> <span class="nav-text">语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建触发器"><span class="nav-number">3.4.1.</span> <span class="nav-text">创建触发器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除查看"><span class="nav-number">3.4.2.</span> <span class="nav-text">删除查看</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#视图"><span class="nav-number">4.</span> <span class="nav-text">视图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义-1"><span class="nav-number">4.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#与表区别"><span class="nav-number">4.2.</span> <span class="nav-text">与表区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优点"><span class="nav-number">4.3.</span> <span class="nav-text">优点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注意"><span class="nav-number">4.4.</span> <span class="nav-text">注意</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#语法-2"><span class="nav-number">4.5.</span> <span class="nav-text">语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#可更新视图"><span class="nav-number">4.5.1.</span> <span class="nav-text">可更新视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#插入数据"><span class="nav-number">4.5.2.</span> <span class="nav-text">插入数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改数据"><span class="nav-number">4.5.3.</span> <span class="nav-text">修改数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除数据"><span class="nav-number">4.5.4.</span> <span class="nav-text">删除数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改已有视图的定义"><span class="nav-number">4.5.5.</span> <span class="nav-text">修改已有视图的定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看视图"><span class="nav-number">4.5.6.</span> <span class="nav-text">查看视图</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Peter</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
